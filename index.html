<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Guardi√£ Rural Pro - MOC</title>
    
    <style>
        :root {
            --azul-logo: #2D46B9;
            --amarelo-logo: #E9C143;
            --verde-maps: #34a853;
            --bg: #f8f9fa;
            --texto: #1a1a1a;
            --safe-top: env(safe-area-inset-top);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            background-color: var(--bg); 
            margin: 0; 
            color: var(--texto);
            padding-top: calc(var(--safe-top) + 220px); 
        }

        header { 
            background: white;
            position: fixed; top: 0; width: 100%; z-index: 1000;
            padding-top: var(--safe-top);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
        }

        .logo-container { padding: 10px; }
        .logo-img { height: 75px; width: auto; }
        .app-title { font-size: 13px; font-weight: 900; color: var(--azul-logo); margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase;}

        .search-container { padding: 5px 15px; }
        #searchBar {
            width: 100%; padding: 12px; border-radius: 12px;
            border: 2px solid #eee; background: #f1f3f4; font-size: 16px; outline: none;
        }

        .categories {
            display: flex; overflow-x: auto; padding: 10px 15px; gap: 8px;
            scrollbar-width: none; background: white;
        }
        .categories::-webkit-scrollbar { display: none; }
        .pill {
            padding: 8px 18px; border-radius: 20px; background: #eee;
            border: none; color: #555; font-size: 11px; font-weight: 800;
            white-space: nowrap; text-transform: uppercase;
        }
        .pill.active { background: var(--azul-logo); color: white; }

        .grid {
            display: grid; 
            grid-template-columns: repeat(4, 1fr);
            gap: 10px; padding: 15px; max-width: 500px; margin: 0 auto;
        }

        /* Bot√£o Padr√£o (Azul) */
        .btn {
            aspect-ratio: 1/1; 
            background: var(--azul-logo); 
            border: 2px solid var(--amarelo-logo);
            border-radius: 12px; 
            font-size: 18px; 
            font-weight: 900; 
            color: white; 
            box-shadow: 0 4px 8px rgba(45, 70, 185, 0.2);
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.1s;
        }

        /* BOT√ÉO SOLAR (AMARELO) */
        .btn-solar {
            background: var(--amarelo-logo) !important;
            color: var(--azul-logo) !important;
            border: 2px solid var(--azul-logo) !important;
            box-shadow: 0 4px 8px rgba(233, 193, 67, 0.4) !important;
        }

        .btn:active { transform: scale(0.85); opacity: 0.8; }

        #modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 2000; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal-box {
            background: white; width: 92%; max-width: 360px; padding: 20px;
            border-radius: 25px; text-align: center; border-top: 8px solid var(--amarelo-logo);
        }
        .ref-header { color: var(--azul-logo); font-size: 10px; font-weight: 800; letter-spacing: 1px; margin-bottom: 5px;}
        .ref-name { font-size: 18px; font-weight: 900; color: #000; text-transform: uppercase; margin-bottom: 12px; border-bottom: 2px solid #eee; padding-bottom: 8px;}
        
        .tech-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-bottom: 12px; }
        .tech-item { background: #f8f9fa; padding: 6px; border-radius: 8px; border: 1px solid #eee; }
        .tech-label { display: block; font-size: 9px; color: #777; font-weight: 800; text-transform: uppercase; }
        .tech-val { display: block; font-size: 13px; color: var(--azul-logo); font-weight: 800; }
        .full-width { grid-column: span 2; background: #eef1ff; border-color: var(--azul-logo); }

        .maps-link {
            display: flex; align-items: center; justify-content: center; gap: 8px;
            background: var(--verde-maps); color: white; text-decoration: none;
            padding: 14px; border-radius: 12px; font-weight: 700; margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(52, 168, 83, 0.3);
        }

        .close-btn { background: #f1f3f4; color: #666; border: none; padding: 12px; border-radius: 12px; font-size: 14px; font-weight: 700; width: 100%; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<header>
    <div class="logo-container"><img src="logo.png" alt="Guardi√£" class="logo-img"></div>
    <div class="app-title">Monitoramento Rural</div>
    <div class="search-container"><input type="text" id="searchBar" placeholder="Pesquisar referencia ou n¬∫..." onkeyup="filtrar()"></div>
    <div class="categories">
        <button class="pill active" onclick="filtrarCat('TUDO', this)">TUDO</button>
        <button class="pill" onclick="filtrarCat('ESTRADA DA PRODU√á√ÉO', this)">PRODU√á√ÉO</button>
        <button class="pill" onclick="filtrarCat('MG 308', this)">MG 308</button>
        <button class="pill" onclick="filtrarCat('BR 365', this)">BR 365</button>
        <button class="pill" onclick="filtrarCat('BR 135', this)">BR 135</button>
    </div>
</header>

<div class="grid" id="mainGrid"></div>

<div id="modal">
    <div class="modal-box">
        <div class="ref-header">PONTO DE MONITORAMENTO RURAL</div>
        <div id="m-ref" class="ref-name"></div>
        
        <div class="tech-grid">
            <div class="tech-item full-width"><span class="tech-label">Rodovia / Local</span><span id="m-dir" class="tech-val"></span></div>
            <div class="tech-item"><span class="tech-label">Pontaletes</span><span id="m-pont" class="tech-val"></span></div>
            <div class="tech-item"><span class="tech-label">PTZ</span><span id="m-ptz" class="tech-val"></span></div>
            <div class="tech-item"><span class="tech-label">Anal√≠tica</span><span id="m-ana" class="tech-val"></span></div>
            <div class="tech-item"><span class="tech-label">LPR</span><span id="m-lpr" class="tech-val"></span></div>
            <div class="tech-item full-width" id="solar-box"><span class="tech-label">Poste Solar</span><span id="m-solar" class="tech-val"></span></div>
        </div>

        <a id="maps-url" href="" target="_blank" class="maps-link">üìç VER LOCAL NO MAPA</a>
        <button class="close-btn" onclick="fechar()">VOLTAR</button>
    </div>
</div>

<script>
    // DADOS T√âCNICOS (S = Solar Sim | N = Solar N√£o)
    const pontosRural = {
        "1": {ref: "EUROFARMA", g: "-16.643067,-43.814701", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "2": {ref: "KRE. PRODU√á√ÉO", g: "-16.661129,-43.810569", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "3": {ref: "KRE. PRODU√á√ÉO", g: "-16.671169,-43.771169", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "4": {ref: "SAMBAIA", g: "-16.652512,-43.779147", pont: 1, ptz: 1, ana: 4, lpr: 2, s: "S"},
        "5": {ref: "KRE. PRODU√á√ÉO", g: "-16.634123,-43.752391", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "6": {ref: "RIO CANABRAVA", g: "-16.642123,-43.782531", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "S"},
        "7": {ref: "TREVO CAPIT√ÉO EN√âAS", g: "-16.655123,-43.812312", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "8": {ref: "TREVO FAZENDA BARREIRO", g: "-16.631257,-43.832174", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "9": {ref: "KRE. PRODU√á√ÉO", g: "-16.592581,-43.682531", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "S"},
        
        "10.1": {ref: "S√ÉO PEDRO DA GAR√áA", g: "-16.174354,-43.865721", pont: 0, ptz: 1, ana: 2, lpr: 2, s: "N"},
        "10.2": {ref: "S√ÉO PEDRO DA GAR√áA", g: "-16.171364,-43.864249", pont: 0, ptz: 1, ana: 3, lpr: 2, s: "N"},
        "10.3": {ref: "S√ÉO PEDRO DA GAR√áA", g: "-16.170329,-43.866304", pont: 0, ptz: 1, ana: 3, lpr: 2, s: "N"},
        
        "11.1": {ref: "APARECIDA DO MUNDO NOVO", g: "-16.115268,-43.924987", pont: 0, ptz: 1, ana: 3, lpr: 2, s: "N"},
        "11.2": {ref: "APARECIDA DO MUNDO NOVO", g: "-16.115054,-43.926347", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "11.3": {ref: "APARECIDA DO MUNDO NOVO", g: "-16.113743,-43.928035", pont: 0, ptz: 1, ana: 3, lpr: 2, s: "N"},
        
        "12": {ref: "SAMAMBAIA", g: "-16.499812,-43.256812", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        
        "13": {ref: "CH√ÅCARA RECANTO VIT√ìRIA", g: "-16.732387,-43.765477", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "14": {ref: "PONTO 17 (MORRO DO MORRO)", g: "-16.711234,-43.758012", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "S"},
        
        "15.1": {ref: "VIASOLO ENG. AMBIENTAL", g: "-16.80261,-43.74253", pont: 1, ptz: 0, ana: 2, lpr: 2, s: "N"},
        "15.2": {ref: "VIASOLO ENG. AMBIENTAL", g: "-16.802308,-43.742994", pont: 0, ptz: 1, ana: 0, lpr: 0, s: "N"},
        "15.3": {ref: "VIASOLO ENG. AMBIENTAL", g: "-16.802445,-43.742443", pont: 1, ptz: 0, ana: 2, lpr: 2, s: "N"},

        "16": {ref: "ENTRADA S√ÉO GERALDO 2", g: "-16.708266,-43.906155", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "17": {ref: "POSTO BARRAL 2", g: "-16.698212,-43.896123", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        
        "18.1": {ref: "ENTRADA CANTO DO ENGENHO", g: "-16.856596,-44.053928", pont: 0, ptz: 1, ana: 3, lpr: 3, s: "S"},
        "18.2": {ref: "CANTO DO ENGENHO", g: "-16.908136,-44.072303", pont: 0, ptz: 1, ana: 3, lpr: 1, s: "N"},
        
        "19": {ref: "CANTO DO ENGENHO / CALHAU", g: "-16.698123,-43.871234", pont: 1, ptz: 1, ana: 4, lpr: 2, s: "N"},

        "20": {ref: "PR√ìXIMO A TIM BAR", g: "-16.624293,-43.905645", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},

        "21.1": {ref: "NOVA ESPERAN√áA", g: "-16.591795,-43.939539", pont: 0, ptz: 1, ana: 3, lpr: 2, s: "N"},
        "21.2": {ref: "NOVA ESPERAN√áA", g: "-16.583996,-43.938143", pont: 0, ptz: 1, ana: 4, lpr: 3, s: "N"},
        "21.3": {ref: "NOVA ESPERAN√áA", g: "-16.583171,-43.939690", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "21.4": {ref: "NOVA ESPERAN√áA", g: "-16.579846,-43.939828", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "21.5": {ref: "NOVA ESPERAN√áA", g: "-16.581552,-43.932128", pont: 0, ptz: 1, ana: 3, lpr: 2, s: "N"},

        "22": {ref: "VALE DOS IP√äS", g: "-16.485678,-43.951231", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},

        "23.1": {ref: "ERMIDINHA", g: "-16.430596,-44.088530", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "23.2": {ref: "ERMIDINHA", g: "-16.426618,-44.092428", pont: 0, ptz: 1, ana: 2, lpr: 2, s: "N"},
        "23.3": {ref: "ERMIDINHA", g: "-16.432924,-44.090728", pont: 0, ptz: 1, ana: 4, lpr: 0, s: "N"},

        "24.1": {ref: "PEDRA PRETA", g: "-16.397228,-44.146957", pont: 0, ptz: 1, ana: 2, lpr: 1, s: "N"},
        "24.2": {ref: "PEDRA PRETA", g: "-16.400718,-44.148533", pont: 0, ptz: 1, ana: 2, lpr: 1, s: "N"},

        "25.1": {ref: "S√ÉO JO√ÉO DA VEREDA", g: "-16.700472,-44.114599", pont: 0, ptz: 1, ana: 3, lpr: 1, s: "N"},
        "25.2": {ref: "S√ÉO JO√ÉO DA VEREDA", g: "-16.701558,-44.114982", pont: 0, ptz: 1, ana: 4, lpr: 0, s: "N"},
        "25.3": {ref: "S√ÉO JO√ÉO DA VEREDA", g: "-16.702478,-44.114267", pont: 0, ptz: 1, ana: 4, lpr: 1, s: "N"},

        "26": {ref: "MIRALTA", g: "-16.531023,-43.952381", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},

        "27.1": {ref: "VILA NOVA", g: "-16.459359,-43.866763", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},
        "27.2": {ref: "VILA NOVA", g: "-16.460815,-43.867670", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},

        "28": {ref: "PANOR√ÇMICA", g: "-16.478612,-43.996111", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},

        "29.1": {ref: "SANTA ROSA DE LIMA", g: "-16.353900,-43.965950", pont: 0, ptz: 1, ana: 2, lpr: 2, s: "N"},
        "29.2": {ref: "SANTA ROSA DE LIMA", g: "-16.347114,-43.963303", pont: 0, ptz: 1, ana: 4, lpr: 0, s: "N"},
        "29.3": {ref: "SANTA ROSA DE LIMA", g: "-16.345021,-43.963812", pont: 0, ptz: 1, ana: 2, lpr: 2, s: "N"},

        "30": {ref: "LAGOINHA", g: "-16.379412,-44.002812", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"},

        "31.1": {ref: "PLANALTO", g: "-16.895852,-43.867733", pont: 0, ptz: 1, ana: 2, lpr: 0, s: "N"},
        "31.2": {ref: "PONTALETE", g: "-16.896464,-43.867820", pont: 1, ptz: 0, ana: 2, lpr: 2, s: "N"},

        "32.1": {ref: "CAMPOS EL√çSEOS", g: "-16.662308,-43.767341", pont: 0, ptz: 1, ana: 4, lpr: 3, s: "N"},
        "32.2": {ref: "CAMPOS EL√çSEOS", g: "-16.640891,-43.746476", pont: 0, ptz: 1, ana: 3, lpr: 2, s: "N"},
        
        "33": {ref: "JARDIM ALEGRIA (FACELA)", g: "-16.295812,-44.071231", pont: 0, ptz: 1, ana: 4, lpr: 2, s: "N"}
    };

    function getDirecao(idStr) {
        const id = parseFloat(idStr);
        if (id >= 1 && id < 13) return "ESTRADA DA PRODU√á√ÉO";
        if (id >= 13 && id < 16) return "MG 308";
        if (id >= 16 && id < 20) return "BR 365";
        if (id >= 20 && id <= 33) return "BR 135";
        return "OUTROS";
    }

    const grid = document.getElementById('mainGrid');

    function render() {
        let html = '';
        Object.keys(pontosRural).sort((a, b) => parseFloat(a) - parseFloat(b)).forEach(key => {
            const p = pontosRural[key];
            const d = getDirecao(key);
            const r = p.ref;
            
            // ADICIONA CLASSE btn-solar SE p.s FOR "S"
            const solarClass = (p.s === "S") ? "btn-solar" : "";
            
            html += `<button class="btn ${solarClass}" data-dir="${d}" data-ref="${r}" onclick="ver('${key}')">${key}</button>`;
        });
        grid.innerHTML = html;
    }

    function ver(id) {
        if (navigator.vibrate) navigator.vibrate(50);
        const p = pontosRural[id];
        const direcao = getDirecao(id);

        document.getElementById('m-ref').innerText = p.ref;
        document.getElementById('m-dir').innerText = direcao;
        document.getElementById('m-pont').innerText = p.pont;
        document.getElementById('m-ptz').innerText = p.ptz;
        document.getElementById('m-ana').innerText = p.ana;
        document.getElementById('m-lpr').innerText = p.lpr;
        
        const solarText = (p.s === "S") ? "SIM" : "N√ÉO";
        document.getElementById('m-solar').innerText = solarText;
        document.getElementById('solar-box').style.background = (p.s === "S") ? "#fff9c4" : "#eef1ff";

        document.getElementById('maps-url').href = `https://www.google.com/maps/search/?api=1&query=${p.g}`;
        document.getElementById('modal').style.display = "flex";
    }

    function fechar() { document.getElementById('modal').style.display = "none"; }

    function filtrar() {
        const termo = document.getElementById('searchBar').value.toUpperCase();
        document.querySelectorAll('.btn').forEach(btn => {
            const ref = btn.getAttribute('data-ref').toUpperCase();
            btn.classList.toggle('hidden', !(ref.includes(termo) || btn.innerText === termo));
        });
    }

    function filtrarCat(cat, el) {
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        el.classList.add('active');
        document.querySelectorAll('.btn').forEach(btn => {
            if (cat === 'TUDO') btn.classList.remove('hidden');
            else btn.classList.toggle('hidden', btn.getAttribute('data-dir') !== cat);
        });
    }

    render();
</script>
</body>
</html>
