<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Guardi√£ Rural - MOC</title>
    
    <style>
        :root {
            --azul-logo: #2D46B9;
            --amarelo-logo: #E9C143;
            --verde-maps: #34a853;
            --bg: #f4f7f9;
            --texto: #1a1a1a;
            --safe-top: env(safe-area-inset-top);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            background-color: var(--bg); 
            margin: 0; 
            padding-top: calc(var(--safe-top) + 220px); 
        }

        header { 
            background: white;
            position: fixed; top: 0; width: 100%; z-index: 1000;
            padding-top: var(--safe-top);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
        }

        .logo-container { padding: 10px; }
        .logo-img { height: 70px; width: auto; }
        .app-title { font-size: 14px; font-weight: 800; color: var(--azul-logo); margin-bottom: 10px; letter-spacing: 1px; }

        .search-container { padding: 5px 15px; }
        #searchBar {
            width: 100%; padding: 12px; border-radius: 10px;
            border: 2px solid #eee; background: #f1f3f4; font-size: 16px; outline: none;
        }

        .categories {
            display: flex; overflow-x: auto; padding: 10px 15px; gap: 8px;
            scrollbar-width: none; background: white;
        }
        .categories::-webkit-scrollbar { display: none; }
        .pill {
            padding: 8px 18px; border-radius: 20px; background: #eee;
            border: none; color: #555; font-size: 11px; font-weight: 800;
            white-space: nowrap; text-transform: uppercase;
        }
        .pill.active { background: var(--azul-logo); color: white; }

        .grid {
            display: grid; 
            grid-template-columns: repeat(4, 1fr);
            gap: 12px; padding: 20px; max-width: 500px; margin: 0 auto;
        }

        .btn {
            aspect-ratio: 1/1; 
            background: var(--azul-logo); 
            border: 3px solid var(--amarelo-logo);
            border-radius: 15px; 
            font-size: 28px; 
            font-weight: 900; 
            color: white; 
            box-shadow: 0 4px 10px rgba(45, 70, 185, 0.2);
            display: flex; align-items: center; justify-content: center;
        }

        .btn:active { transform: scale(0.9); }

        #modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 2000; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal-box {
            background: white; width: 90%; max-width: 350px; padding: 25px;
            border-radius: 25px; text-align: center; border-top: 8px solid var(--amarelo-logo);
        }
        .info-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; font-size: 13px; }
        .info-label { font-weight: 700; color: #666; }
        .info-value { font-weight: 800; color: var(--azul-logo); }

        .ref-text { font-size: 18px; font-weight: 800; margin: 15px 0; text-transform: uppercase; color: #000; }
        
        .maps-link {
            display: flex; align-items: center; justify-content: center; gap: 8px;
            background: var(--verde-maps); color: white; text-decoration: none;
            padding: 14px; border-radius: 12px; font-weight: 700; margin: 15px 0 10px 0;
        }

        .close-btn { background: #eee; color: #444; border: none; padding: 12px; border-radius: 12px; width: 100%; font-weight: 700; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<header>
    <div class="logo-container"><img src="logo.png" alt="Guardi√£" class="logo-img"></div>
    <div class="app-title">MONITORAMENTO RURAL</div>
    <div class="search-container"><input type="text" id="searchBar" placeholder="Referencia ou Numero..." onkeyup="filtrar()"></div>
    <div class="categories">
        <button class="pill active" onclick="filtrarCat('TUDO', this)">TUDO</button>
        <button class="pill" onclick="filtrarCat('ESTRADA DA PRODUCAO', this)">PRODU√á√ÉO</button>
        <button class="pill" onclick="filtrarCat('MG 308', this)">MG-308</button>
        <button class="pill" onclick="filtrarCat('BR 365', this)">BR-365</button>
        <button class="pill" onclick="filtrarCat('BR 135', this)">BR-135</button>
    </div>
</header>

<div class="grid" id="mainGrid"></div>

<div id="modal">
    <div class="modal-box">
        <div style="font-size: 11px; font-weight: 800; color: var(--azul-logo); letter-spacing: 1px;">PONTO DE MONITORAMENTO</div>
        <div id="m-ref" class="ref-text"></div>
        
        <div class="info-row"><span class="info-label">RODOVIA/DIR:</span> <span id="m-dir" class="info-value"></span></div>
        <div class="info-row"><span class="info-label">PTZ / LPR:</span> <span id="m-tech" class="info-value"></span></div>
        <div class="info-row"><span class="info-label">SOLAR:</span> <span id="m-solar" class="info-value"></span></div>

        <a id="maps-url" href="" target="_blank" class="maps-link">üìç ABRIR NO GOOGLE MAPS</a>
        <button class="close-btn" onclick="fechar()">VOLTAR</button>
    </div>
</div>

<script>
    // DADOS EXTRAIDOS DA SUA PLANILHA RURAL
    const pontos = {
        1: {r: "EUROFARMA", d: "ESTRADA DA PRODUCAO", g: "-16.643067,-43.814701", ptz: "SIM", lpr: "2", solar: "NAO"},
        2: {r: "KRE. PRODUCAO", d: "ESTRADA DA PRODUCAO", g: "-16.661129,-43.810569", ptz: "SIM", lpr: "2", solar: "NAO"},
        3: {r: "KRE. PRODUCAO 2", d: "ESTRADA DA PRODUCAO", g: "-16.671169,-43.771169", ptz: "SIM", lpr: "2", solar: "BAIXA TENSAO"},
        4: {r: "SAMAMBAIA", d: "ESTRADA DA PRODUCAO", g: "-16.652512,-43.779147", ptz: "SIM", lpr: "2", solar: "SIM"},
        5: {r: "KRE. PRODUCAO 3", d: "ESTRADA DA PRODUCAO", g: "-16.634123,-43.752391", ptz: "SIM", lpr: "2", solar: "OK"},
        9: {r: "KRE. PRODUCAO FINAL", d: "ESTRADA DA PRODUCAO", g: "-16.592581,-43.682531", ptz: "SIM", lpr: "2", solar: "SIM"},
        13: {r: "CHACARA RECANTO VITORIA", d: "MG 308", g: "-16.732387,-43.765477", ptz: "SIM", lpr: "2", solar: "NAO"},
        14: {r: "PONTO 17 (MORRO DO MORRO)", d: "MG 308", g: "-16.711234,-43.758012", ptz: "SIM", lpr: "2", solar: "SIM"},
        16: {r: "ENTRADA SAO GERALDO 2", d: "BR 365", g: "-16.708266,-43.906155", ptz: "SIM", lpr: "2", solar: "NAO"},
        18: {r: "ENTRADA CANTO DO ENGENHO", d: "BR 365", g: "-16.703644,-43.872421", ptz: "SIM", lpr: "2", solar: "SIM"},
        20: {r: "PROXIMO A TIM BAR", d: "BR 135", g: "-16.624293,-43.905645", ptz: "SIM", lpr: "2", solar: "NAO"},
        21: {r: "NOVA ESPERANCA", d: "BR 135", g: "-16.595874,-43.912384", ptz: "SIM", lpr: "2", solar: "NAO"},
        26: {r: "MIRALTA", d: "BR 135", g: "-16.531023,-43.952381", ptz: "SIM", lpr: "2", solar: "NAO"}
        // Adicione os outros pontos seguindo este padr√£o
    };

    // Preenche pontos vazios para a grade n√£o quebrar at√© voc√™ completar
    for(let i=1; i<=32; i++) {
        if(!pontos[i]) pontos[i] = {r: "PONTO RURAL "+i, d: "OUTROS", g: "0,0", ptz: "-", lpr: "-", solar: "-"};
    }

    const grid = document.getElementById('mainGrid');

    function render() {
        let html = '';
        Object.keys(pontos).forEach(id => {
            html += `<button class="btn" data-dir="${pontos[id].d}" data-ref="${pontos[id].r}" onclick="ver(${id})">${id}</button>`;
        });
        grid.innerHTML = html;
    }

    function ver(id) {
        const p = pontos[id];
        document.getElementById('m-ref').innerText = p.r;
        document.getElementById('m-dir').innerText = p.d;
        document.getElementById('m-tech').innerText = `PTZ: ${p.ptz} | LPR: ${p.lpr}`;
        document.getElementById('m-solar').innerText = p.solar;
        document.getElementById('maps-url').href = `https://www.google.com/maps/search/?api=1&query=${p.g}`;
        document.getElementById('modal').style.display = "flex";
    }

    function fechar() { document.getElementById('modal').style.display = "none"; }

    function filtrar() {
        const termo = document.getElementById('searchBar').value.toUpperCase();
        document.querySelectorAll('.btn').forEach(btn => {
            const ref = btn.getAttribute('data-ref').toUpperCase();
            btn.classList.toggle('hidden', !(ref.includes(termo) || btn.innerText === termo));
        });
    }

    function filtrarCat(cat, el) {
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        el.classList.add('active');
        document.querySelectorAll('.btn').forEach(btn => {
            if (cat === 'TUDO') btn.classList.remove('hidden');
            else btn.classList.toggle('hidden', btn.getAttribute('data-dir') !== cat);
        });
    }

    render();
</script>
</body>
</html>
